datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id    String @id @default(uuid())
  email String @unique

  settings Json?

  bookmarks         Bookmark[]
  shoppingListItems ShoppingListItem[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}

model Dinner {
  id Int @id @default(autoincrement())

  title           String
  description     String? @db.Text
  preparationTime Int
  totalTime       Int
  difficulty      Int
  serves          Int
  ingredients     Json?
  steps           Json?
  shoppingList    Json?
  images          Json?

  bookmarks Bookmark[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("dinners")
}

model Bookmark {
  id       String  @id @default(uuid())
  userId   String?
  dinnerId Int?

  user   User?   @relation(fields: [userId], references: [id])
  dinner Dinner? @relation(fields: [dinnerId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("bookmarks")
}

model ShoppingListItem {
  id Int @id @default(autoincrement())

  shoppingList Json
  completed    Boolean @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  User   User?   @relation(fields: [userId], references: [id])
  userId String?

  @@map("shopping_list_items")
}
